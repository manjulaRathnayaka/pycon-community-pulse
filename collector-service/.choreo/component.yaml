# +required The configuration file schema version
schemaVersion: 1.2

# Collector service runs as a scheduled task (no endpoints)

# +optional Dependencies for the component
dependencies:
  connectionReferences:
    - name: connection-pycon-collector-defaultdb
      resourceRef: database:pycon-pulse-db/defaultdb

# +optional Defines runtime configurations
configurations:
  # +optional File mounts for CA certificate
  fileMounts:
    - name: db-ca-certificate
      mountPath: /etc/ssl/certs/ca.pem
      configType: secret
  # +optional List of environment variables
  env:
    - name: DB_CA_CERT_PATH
      value: /etc/ssl/certs/ca.pem
    - name: COLLECTION_INTERVAL_MINUTES
      valueFrom:
        configForm:
          displayName: Collection Interval (Minutes)
          required: false
          type: string
    - name: MAX_POSTS_PER_SOURCE
      valueFrom:
        configForm:
          displayName: Max Posts Per Source
          required: false
          type: string
    - name: YOUTUBE_API_KEY
      valueFrom:
        configForm:
          displayName: YouTube API Key
          required: false
          type: secret
    - name: GITHUB_TOKEN
      valueFrom:
        configForm:
          displayName: GitHub Token
          required: false
          type: secret
    - name: LOG_LEVEL
      valueFrom:
        configForm:
          displayName: Log Level
          required: false
          type: string
